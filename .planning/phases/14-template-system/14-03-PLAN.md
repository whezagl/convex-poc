---
phase: 14-template-system
plan: 03
type: execute
wave: 2
depends_on: [14-01]
files_modified:
  - .templates/boilerplate/be/package.json.hbs
  - .templates/boilerplate/be/tsconfig.json.hbs
  - .templates/boilerplate/biome.json.hbs
  - .templates/boilerplate/be/README.md.hbs
  - .templates/boilerplate/be/.gitignore.hbs
  - .templates/boilerplate/be/src/index.ts.hbs
autonomous: true

must_haves:
  truths:
    - "Backend boilerplate templates exist in .templates/boilerplate/be/"
    - "Templates generate package.json, tsconfig.json, biome.json for Node.js backend"
    - "Templates include proper dependencies (Express, Zod, PostgreSQL driver)"
    - "Generated code includes file header warning (DO NOT EDIT - Auto-generated)"
    - "Templates use Handlebars helpers (pascalCase, camelCase) for name transformation"
  artifacts:
    - path: ".templates/boilerplate/be/package.json.hbs"
      provides: "Backend package.json template"
      min_lines: 30
    - path: ".templates/boilerplate/be/tsconfig.json.hbs"
      provides: "Backend TypeScript config template"
      min_lines: 20
    - path: ".templates/boilerplate/be/biome.json.hbs"
      provides: "Biome formatter config template"
      min_lines: 15
    - path: ".templates/boilerplate/be/README.md.hbs"
      provides: "Backend README template with usage instructions"
      min_lines: 40
    - path: ".templates/boilerplate/be/src/index.ts.hbs"
      provides: "Backend entry point template"
      min_lines: 20
  key_links:
    - from: ".templates/boilerplate/be/*.hbs"
      to: "template-engine package"
      via: "Handlebars compilation"
      pattern: "\\{\\{\\{[a-zA-Z]+\\}\\}\\}"
---

<objective>
Create backend boilerplate templates for project scaffolding (package.json, tsconfig.json, biome.json, README.md, index.ts).

Purpose: These templates generate the foundational backend project structure when BE Boilerplate agent runs. They provide consistent project setup with proper TypeScript, formatting, and dependencies.
Output: Handlebars templates in .templates/boilerplate/be/ that render to valid backend project files.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/14-template-system/14-CONTEXT.md
@.planning/phases/14-template-system/14-RESEARCH.md
@.planning/phases/14-template-system/14-01-SUMMARY.md

@packages/template-engine/src/engine/index.ts
</context>

<tasks>

<task type="auto">
  <name>Create backend package.json template</name>
  <files>.templates/boilerplate/be/package.json.hbs</files>
  <action>
    Create Handlebars template for backend package.json:

    Create `.templates/boilerplate/be/package.json.hbs`:
    ```handlebars
{
  "name": "{{pascalCase projectName}}",
  "version": "0.1.0",
  "type": "module",
  "description": "{{{description}}}",
  "main": "dist/index.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "dev": "tsc --watch & nodemon --watch dist --exec node dist/index.js",
    "build": "tsc",
    "start": "node dist/index.js",
    "test": "vitest run",
    "test:watch": "vitest",
    "lint": "biome check src/",
    "lint:fix": "biome check --write src/",
    "format": "biome format --write src/",
    "db:migrate": "node dist/db/migrate.js",
    "db:seed": "node dist/db/seed.js"
  },
  "dependencies": {
    "express": "^5.0.0",
    "zod": "^4.0.0",
    "pg": "^8.13.0",
    "@types/pg": "^8.11.0",
    "dotenv": "^16.4.0"
  },
  "devDependencies": {
    "@types/express": "^5.0.0",
    "@types/node": "^22.0.0",
    "typescript": "^5.7.0",
    "vitest": "^2.1.0",
    "nodemon": "^3.1.0",
    "@biomejs/biome": "^1.9.0"
  },
  "engines": {
    "node": ">=20.0.0"
  }
}
    ```

    Template variables:
    - `projectName`: Project name in camelCase, transformed to PascalCase
    - `description`: Project description

    Uses `pascalCase` helper for package name transformation.
  </action>
  <verify>
    - Template file exists at .templates/boilerplate/be/package.json.hbs
    - Handlebars syntax is valid ({{pascalCase projectName}})
    - Dependencies include Express, Zod, pg (PostgreSQL driver)
    - Scripts cover dev, build, test, lint, database operations
  </verify>
  <done>
    Backend package.json template is created with proper dependencies
  </done>
</task>

<task type="auto">
  <name>Create backend TypeScript config template</name>
  <files>.templates/boilerplate/be/tsconfig.json.hbs</files>
  <action>
    Create Handlebars template for backend tsconfig.json:

    Create `.templates/boilerplate/be/tsconfig.json.hbs`:
    ```handlebars
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "lib": ["ES2022"],
    "moduleResolution": "node16",
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "allowSyntheticDefaultImports": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "**/*.test.ts"]
}
    ```

    No template variables - standard TypeScript config for Node.js backend.
  </action>
  <verify>
    - Template file exists at .templates/boilerplate/be/tsconfig.json.hbs
    - Compiler options target ES2022 for Node.js 20+
    - Strict mode is enabled
    - Output directory is dist/
  </verify>
  <done>
    Backend TypeScript config template is created with strict settings
  </done>
</task>

<task type="auto">
  <name>Create backend Biome config template</name>
  <files>.templates/boilerplate/be/biome.json.hbs</files>
  <action>
    Create Handlebars template for backend Biome configuration:

    Create `.templates/boilerplate/be/biome.json.hbs`:
    ```handlebars
{
  "$schema": "https://biomejs.dev/schemas/1.9.0/schema.json",
  "vcs": {
    "enabled": true,
    "clientKind": "git",
    "useIgnoreFile": true
  },
  "files": {
    "ignoreUnknown": false,
    "ignore": ["node_modules", "dist", "*.lockb"]
  },
  "formatter": {
    "enabled": true,
    "formatWithErrors": false,
    "indentStyle": "space",
    "indentWidth": 2,
    "lineWidth": 80
  },
  "organizeImports": {
    "enabled": true
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noExplicitAny": "warn"
      },
      "style": {
        "noNonNullAssertion": "warn"
      },
      "correctness": {
        "noUnusedVariables": "error"
      }
    }
  },
  "javascript": {
    "formatter": {
      "quoteStyle": "single",
      "jsxQuoteStyle": "double",
      "trailingCommas": "es5",
      "semicolons": "always",
      "arrowParentheses": "always"
    }
  }
}
    ```

    No template variables - standard Biome config for backend code style.
  </action>
  <verify>
    - Template file exists at .templates/boilerplate/be/biome.json.hbs
    - Formatter uses 2-space indentation, 80 char line width
    - Linter enables recommended rules
    - JavaScript formatter uses single quotes, semicolons
  </verify>
  <done>
    Backend Biome config template is created with code style rules
  </done>
</task>

<task type="auto">
  <name>Create backend README template</name>
  <files>.templates/boilerplate/be/README.md.hbs</files>
  <action>
    Create Handlebars template for backend README.md:

    Create `.templates/boilerplate/be/README.md.hbs`:
    ```handlebars
# {{pascalCase projectName}}

âš ï¸ **DO NOT EDIT â€” Auto-generated on {{formatDate (new Date)}}**

{{{description}}}

## Prerequisites

- Node.js >= 20.0.0
- PostgreSQL >= 17

## Setup

1. Install dependencies:
```bash
npm install
```

2. Copy environment variables:
```bash
cp .env.example .env
```

3. Update `.env` with your database credentials:
```env
DATABASE_URL=postgresql://user:password@localhost:5432/{{camelCase projectName}}
PORT=3000
```

4. Run database migrations:
```bash
npm run db:migrate
```

5. Seed database (optional):
```bash
npm run db:seed
```

## Development

Start development server with hot-reload:
```bash
npm run dev
```

The server will start on http://localhost:3000

## Building

Compile TypeScript to JavaScript:
```bash
npm run build
```

Output will be in `dist/` directory.

## Testing

Run tests:
```bash
npm test
```

Run tests in watch mode:
```bash
npm run test:watch
```

## Code Quality

Lint code:
```bash
npm run lint
```

Fix linting issues:
```bash
npm run lint:fix
```

Format code:
```bash
npm run format
```

## API Documentation

API endpoints are documented using OpenAPI/Swagger. Visit http://localhost:3000/docs for interactive API documentation.

## Database

### Migrations

Create a new migration:
```bash
npm run db:migrate:create migration_name
```

Run migrations:
```bash
npm run db:migrate
```

### Schema

Database schema is defined in `src/db/schema.ts`.

## Project Structure

```
src/
â”œâ”€â”€ index.ts           # Entry point
â”œâ”€â”€ db/                # Database layer
â”‚   â”œâ”€â”€ schema.ts      # Database schema
â”‚   â”œâ”€â”€ migrate.ts     # Migration runner
â”‚   â””â”€â”€ seed.ts        # Seed data
â”œâ”€â”€ routes/            # API routes
â”œâ”€â”€ services/          # Business logic
â”œâ”€â”€ middleware/        # Express middleware
â””â”€â”€ utils/             # Utility functions
```

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| DATABASE_URL | PostgreSQL connection string | - |
| PORT | Server port | 3000 |
| NODE_ENV | Environment (development/production) | development |

## License

MIT
    ```

    Template variables:
    - `projectName`: Transformed to PascalCase for title
    - `description`: Project description
    - `formatDate`: Current date generation

    Uses `pascalCase`, `camelCase`, and `formatDate` helpers.
  </action>
  <verify>
    - Template file exists at .templates/boilerplate/be/README.md.hbs
    - Includes auto-generated warning header
    - Documents setup, development, testing, and project structure
    - Uses Handlebars helpers for name transformation
  </verify>
  <done>
    Backend README template is created with comprehensive documentation
  </done>
</task>

<task type="auto">
  <name>Create backend .gitignore and index.ts templates</name>
  <files>.templates/boilerplate/be/.gitignore.hbs, .templates/boilerplate/be/src/index.ts.hbs</files>
  <action>
    Create Handlebars templates for .gitignore and entry point:

    1. Create `.templates/boilerplate/be/.gitignore.hbs`:
    ```handlebars
# Dependencies
node_modules/

# Build output
dist/

# Environment variables
.env
.env.local
.env.*.local

# Logs
logs/
*.log
npm-debug.log*

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Testing
coverage/

# Misc
*.tsbuildinfo
    ```

    2. Create `.templates/boilerplate/be/src/index.ts.hbs`:
    ```handlebars
/**
 * {{pascalCase projectName}}
 *
 * âš ï¸ DO NOT EDIT â€” Auto-generated on {{formatDate (new Date)}}
 *
 * Backend entry point with Express server and PostgreSQL connection
 */

import express from 'express';
import { env } from './utils/env.js';

const app = express();
const PORT = env.PORT;

// Middleware
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Health check
app.get('/health', (req, res) => {
  res.json({ status: 'ok', timestamp: new Date().toISOString() });
});

// API routes
app.use('/api', (req, res) => {
  res.json({ message: '{{pascalCase projectName}} API' });
});

// Start server
app.listen(PORT, () => {
  console.log(`ðŸš€ Server running on http://localhost:${PORT}`);
});

// Graceful shutdown
process.on('SIGTERM', () => {
  console.log('SIGTERM received, shutting down gracefully');
  process.exit(0);
});

process.on('SIGINT', () => {
  console.log('SIGINT received, shutting down gracefully');
  process.exit(0);
});
    ```

    Templates use `pascalCase` and `formatDate` helpers.
  </action>
  <verify>
    - Both template files exist
    - .gitignore covers Node.js standard exclusions
    - index.ts includes auto-generated warning header
    - index.ts creates Express server with health check
  </verify>
  <done>
    Backend .gitignore and index.ts templates are created
  </done>
</task>

</tasks>

<verification>
Overall phase checks:
- All templates exist in .templates/boilerplate/be/ directory
- Templates use valid Handlebars syntax ({{pascalCase}}, {{camelCase}}, {{formatDate}})
- Auto-generated warnings are included in code and README templates
- package.json template includes Express, Zod, pg dependencies
- tsconfig.json uses ES2022 target for Node.js 20+
- biome.json configures code style (2-space indent, 80 char width)
- README.md documents setup, development, testing, and project structure
- .gitignore covers standard Node.js exclusions
- index.ts creates Express server with health check endpoint
</verification>

<success_criteria>
1. All 6 backend boilerplate templates exist in .templates/boilerplate/be/
2. Templates generate valid backend project files (package.json, tsconfig.json, biome.json)
3. Templates use Handlebars helpers for name transformation (pascalCase, camelCase)
4. Generated code includes auto-generated warning (DO NOT EDIT - Auto-generated on [date])
5. README.md template documents complete setup and development workflow
6. Dependencies include Express, Zod, pg for backend API development
</success_criteria>

<output>
After completion, create `.planning/phases/14-template-system/14-03-SUMMARY.md`
</output>
