---
phase: 01-project-setup
plan: 01
type: execute
domain: typescript
---

<objective>
Initialize TypeScript project with Claude Agent SDK and development tooling.

Purpose: Establish the core project structure, dependencies, and build pipeline for the AI Agents POC.
Output: Working TypeScript project with package.json, tsconfig.json, tsup.config.ts, and all dependencies installed.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-project-setup/01-RESEARCH.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize TypeScript project with package.json and tsconfig.json</name>
  <files>package.json, tsconfig.json</files>
  <action>
    Create package.json with:
    - name: "convex-poc"
    - version: "0.1.0"
    - type: "module" (ESM for modern Node)
    - scripts: dev (tsx), build (tsup), test (echo "no tests yet")
    - engines: node >=20

    Create tsconfig.json with:
    - target: ES2022
    - module: nodenext
    - moduleResolution: nodenext
    - strict: true
    - skipLibCheck: true
    - outDir: ./dist
    - rootDir: ./src

    Use exact versions from Phase 1 research. DO NOT use workspace/monorepo setup (single package for learning POC).
  </action>
  <verify>
    cat package.json shows valid JSON with type:"module"
    cat tsconfig.json shows valid JSON with strict mode enabled
    node --version confirms >=20
  </verify>
  <done>
    package.json created with ESM module type and Node 20 engine requirement
    tsconfig.json created with strict mode and nodenext module resolution
  </done>
</task>

<task type="auto">
  <name>Task 2: Install all npm dependencies (SDK, Convex, dev tools)</name>
  <files>package.json, package-lock.json</files>
  <action>
    Run npm install for core dependencies:
    - @anthropic-ai/claude-agent-sdk (NOT @anthropic-ai/sdk - that's low-level API only)
    - convex (self-hosted backend)
    - zod (schema validation)

    Run npm install -D for dev dependencies:
    - tsx (TypeScript execution)
    - tsup (production bundler)
    - typescript (already in package.json, ensures version matches)
    - @types/node (Node.js types)
    - prettier (code formatting)
    - eslint (linting)
    - @typescript-eslint/parser
    - @typescript-eslint/eslint-plugin

    DO NOT install:
    - @anthropic-ai/sdk directly (comes as dependency of agent-sdk)
    - ts-node (tsx is faster - esbuild-based)
    - unbuild/rollup (tsup is zero-config, esbuild-based)
  </action>
  <verify>
    npm list @anthropic-ai/claude-agent-sdk shows installed version
    npm list convex shows installed version
    npm list tsx tsup shows installed dev dependencies
    node_modules/.package-lock.json exists
  </verify>
  <done>
    All dependencies installed successfully
    package-lock.json committed
    No npm warnings or errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Create tsup.config.ts for production bundling</name>
  <files>tsup.config.ts</files>
  <action>
    Create tsup.config.ts with:
    - entry: ['src/index.ts']
    - format: ['esm']
    - dts: true (generate declaration files)
    - clean: true (clean dist before build)
    - sourcemap: true
    - target: 'node20'
    - esbuildOptions: {
        minify: false (keep readable for learning POC)
      }

    This creates a zero-config bundler setup. DO NOT add complex plugins or loaders.
  </action>
  <verify>
    cat tsup.config.ts shows valid TypeScript configuration
    npm run build (if src/index.ts exists) completes without error
    OR verify configuration syntax with tsx --eval tsup.config.ts
  </verify>
  <done>
    tsup.config.ts created with ESM output format
    Configuration matches recommended pattern from research
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm install` succeeded with all dependencies
- [ ] `cat package.json` shows valid configuration
- [ ] `cat tsconfig.json` shows valid TypeScript configuration
- [ ] `cat tsup.config.ts` shows valid bundler configuration
- [ ] No npm warnings or errors during installation
</verification>

<success_criteria>

- All three tasks completed
- package.json, tsconfig.json, tsup.config.ts all created
- Dependencies installed without errors
- Project ready for next phase (Docker Compose setup)
  </success_criteria>

<output>
After completion, create `.planning/phases/01-project-setup/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Core Setup Summary

**TypeScript project initialized with Claude Agent SDK and development tooling.**

## Accomplishments

- Created package.json with ESM module type and Node 20 requirement
- Created tsconfig.json with strict mode and modern module resolution
- Installed @anthropic-ai/claude-agent-sdk, convex, zod, and all dev dependencies
- Created tsup.config.ts for production ESM bundling

## Files Created/Modified

- `package.json` - Project manifest with dependencies and scripts
- `tsconfig.json` - TypeScript configuration with strict mode
- `tsup.config.ts` - Zero-config bundler setup for ESM output
- `package-lock.json` - Locked dependency versions

## Decisions Made

- ESM over CommonJS for modern Node compatibility
- tsx over ts-node for faster TypeScript execution (esbuild-based)
- tsup over unbuild/rollup for zero-config bundling
- Single-package structure (not monorepo) for learning POC simplicity

## Issues Encountered

None

## Next Step

Ready for 01-02-PLAN.md (Docker Compose + Convex setup)
</output>
